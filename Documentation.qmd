---
title: "Documentation"
---

# Package Functions

This page documents all functions included in our Python package.  
The functions are grouped into two modules:

- `cleaning.py` — scraping and cleaning raw ski resort data  
- `analysis.py` — analysis utilities for summary statistics and visualizations  


---

# ## Cleaning Module (`cleaning.py`)

## `fetch_raw_table(url, email)`
Scrapes the Wikipedia ski resort comparison table and returns the raw (uncleaned) DataFrame.

**Arguments**
- `url`: The Wikipedia page URL  
- `email`: Your contact email for the scraper’s User-Agent  

**Returns**
- Raw `pandas.DataFrame` containing the table data  


---

## `remove_brackets(text)`
Removes bracketed citations (e.g., `[3]`) from text fields.

**Arguments**
- `text`: A string containing bracketed citation text  

**Returns**
- Cleaned string with citations removed  


---

## `clean_numeric(val)`
Removes non-numeric characters (commas, text, units) and converts values to float.

**Arguments**
- `val`: A string or number to clean  

**Returns**
- `float` value or `NaN`  


---

## `convert_numeric_columns(df, numeric_cols)`
Converts an entire list of columns to numeric using `clean_numeric()`.

**Arguments**
- `df`: DataFrame to modify  
- `numeric_cols`: List of columns to convert  

**Returns**
- Updated DataFrame with numeric columns  


---

## `run_cleaning_pipeline(url, email)`
Runs the complete cleaning pipeline:

1. Scrapes the Wikipedia table  
2. Drops unnecessary columns  
3. Renames columns  
4. Removes missing snowfall rows  
5. Cleans string columns  
6. Converts numeric columns  

**Arguments**
- `url`: Wikipedia ski resorts comparison URL  
- `email`: Contact email for scraper  

**Returns**
- Clean, analysis-ready DataFrame  

**Example**
```python
from snowpack.cleaning import run_cleaning_pipeline

df = run_cleaning_pipeline(
    url="https://en.wikipedia.org/wiki/Comparison_of_North_American_ski_resorts",
    email="example@byu.edu"
)
```

# ###Analysis Module (`analysis.py`)

## convert_snowfall_to_numeric(df)

Converts the Average Annual Snowfall (inches) column to a numeric type.
Invalid values are coerced to NaN.

**Arguments**
- df: Input ski resort DataFrame

**Returns**
- DataFrame with numeric snowfall column


## plot_snowfall_distribution(df)

Plots a histogram and KDE curve showing the distribution of annual snowfall across all ski resorts.

**Arguments**
- df: Dataset containing snowfall values

**Returns**
- Displays a plot


## assign_regions(df)

Maps each U.S. state or Canadian province into a geographic region
(e.g., "Western US", "Eastern Canada").

**Arguments**
- df: DataFrame with State/Province column

**Returns**
- Updated DataFrame with a new Region column


## plot_snowfall_by_region(df)
Creates a boxplot showing snowfall distributions for each geographic region.

**Arguments**
- df: Dataset containing Region and snowfall values

**Returns**
- Displays a plot


## plot_top10_resorts(df)

- Displays a horizontal barplot of the top 10 snowiest ski resorts.

**Arguments**
- df: Dataset containing snowfall values

**Returns**
- None (displays a plot)


## plot_state_average_snowfall(df)

Computes mean snowfall per state/province and plots the results in descending order.

**Arguments**
- df: Dataset with state/province and snowfall values

**Returns**
- Displays a plot


## plot_snowfall_vs_elevation(df)

Creates a scatterplot showing the relationship between peak elevation and annual snowfall.
The top 5 snowiest resorts are labeled.

**Arguments**
- df: Dataset containing elevation and snowfall

**Returns**
- Displays a plot


## run_analysis_pipeline(df)

Runs the full analysis pipeline:
1. Converts snowfall to numeric
2. Assigns geographic regions
3. Plots snowfall distribution
4. Plots snowfall by region
5. Plots top 10 resorts
6. Plots state averages
7. Plots snowfall vs. elevation

**Arguments**
- df: Cleaned ski resort dataset

**Returns**
- DataFrame after all analysis-ready transformations (numeric snowfall + region assigned)